{"pageProps":{"state":{"globalHeaders":{"https://napari-hub.org":{"level":1,"children":[],"href":"https://napari-hub.org","text":"napari hub"},"https://github.com/napari/napari":{"level":1,"children":[],"href":"https://github.com/napari/napari","text":"napari source code"},"/developers/index.html":{"level":1,"children":["/developers/benchmarks.html","/developers/contributing.html","/developers/core_dev_guide.html","/developers/profiling.html","/developers/release.html","/developers/testing.html","/developers/docs.html"],"href":"/developers/index.html","text":"Developer resources"},"/developers/docs.html":{"level":2,"children":[],"href":"/developers/docs.html","text":"Organization of Documentation for napari"},"/developers/testing.html":{"level":2,"children":[],"href":"/developers/testing.html","text":"Testing"},"/developers/release.html":{"level":2,"children":[],"href":"/developers/release.html","text":"Release Guide"},"/developers/profiling.html":{"level":2,"children":[],"href":"/developers/profiling.html","text":"Profiling"},"/developers/core_dev_guide.html":{"level":2,"children":[],"href":"/developers/core_dev_guide.html","text":"Core Developer Guide"},"/developers/contributing.html":{"level":2,"children":[],"href":"/developers/contributing.html","text":"Contributing Guide"},"/developers/benchmarks.html":{"level":2,"children":[],"href":"/developers/benchmarks.html","text":"Benchmarks"},"/guides/stable/index.html":{"level":1,"children":["/guides/stable/event_loop.html","/guides/stable/threading.html","/guides/stable/perfmon.html","/guides/stable/rendering.html","/guides/stable/docker.html","/guides/stable/performance.html","/guides/stable/magicgui.html","/guides/stable/translations.html","/guides/stable/rendering-explanation.html","/guides/stable/connecting_events.html","/guides/stable/connecting_events.html#long-running-blocking-functions","/guides/stable/3D_interactivity.html"],"href":"/guides/stable/index.html","text":"Developer guides"},"/guides/stable/3D_interactivity.html":{"level":2,"children":[],"href":"/guides/stable/3D_interactivity.html","text":"3D interactivity"},"/guides/stable/connecting_events.html#long-running-blocking-functions":{"level":2,"children":[],"href":"/guides/stable/connecting_events.html#long-running-blocking-functions","text":"Long-running, blocking functions"},"/guides/stable/connecting_events.html":{"level":2,"children":[],"href":"/guides/stable/connecting_events.html","text":"Hooking up your own events"},"/guides/stable/rendering-explanation.html":{"level":2,"children":[],"href":"/guides/stable/rendering-explanation.html","text":"Rendering in napari"},"/guides/stable/translations.html":{"level":2,"children":[],"href":"/guides/stable/translations.html","text":"Translations"},"/guides/stable/magicgui.html":{"level":2,"children":[],"href":"/guides/stable/magicgui.html","text":"Using magicgui in napari"},"/guides/stable/performance.html":{"level":2,"children":[],"href":"/guides/stable/performance.html","text":"Napari Performance"},"/guides/stable/docker.html":{"level":2,"children":[],"href":"/guides/stable/docker.html","text":"Napari in Docker (WIP)"},"/guides/stable/rendering.html":{"level":2,"children":[],"href":"/guides/stable/rendering.html","text":"Asynchronous Rendering"},"/guides/stable/perfmon.html":{"level":2,"children":[],"href":"/guides/stable/perfmon.html","text":"Performance Monitoring"},"/guides/stable/threading.html":{"level":2,"children":[],"href":"/guides/stable/threading.html","text":"Multithreading in napari"},"/guides/stable/event_loop.html":{"level":2,"children":[],"href":"/guides/stable/event_loop.html","text":"An Introduction to the Event Loop in napari"},"/roadmaps/index.html":{"level":1,"children":["/roadmaps/0_4.html","/roadmaps/0_3_retrospective.html","/roadmaps/0_3.html"],"href":"/roadmaps/index.html","text":"Roadmaps"},"/roadmaps/0_3.html":{"level":2,"children":[],"href":"/roadmaps/0_3.html","text":"Roadmap 0.3"},"/roadmaps/0_3_retrospective.html":{"level":2,"children":[],"href":"/roadmaps/0_3_retrospective.html","text":"Roadmap 0.3 Retrospective"},"/roadmaps/0_4.html":{"level":2,"children":[],"href":"/roadmaps/0_4.html","text":"Roadmap 0.4"},"/api/stable/index.html":{"level":1,"children":["/api/stable/napari.layers.html","/api/stable/napari.view_layers.html","/api/stable/napari.types.html","/api/stable/napari.utils.html","/api/stable/napari.plugins.html","/api/stable/napari.components.html","/api/stable/napari.qt.threading.html","/api/stable/napari.utils.perf.html","/api/stable/napari.html"],"href":"/api/stable/index.html","text":"API reference"},"/api/stable/napari.html":{"level":2,"children":["/api/stable/napari.Viewer.html"],"href":"/api/stable/napari.html","text":"napari"},"/api/stable/napari.Viewer.html":{"level":3,"children":[],"href":"/api/stable/napari.Viewer.html","text":"napari.Viewer"},"/api/stable/napari.utils.perf.html":{"level":2,"children":["/api/stable/napari.utils.perf.PerfEvent.html"],"href":"/api/stable/napari.utils.perf.html","text":"napari.utils.perf"},"/api/stable/napari.utils.perf.PerfEvent.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.perf.PerfEvent.html","text":"napari.utils.perf.PerfEvent"},"/api/stable/napari.qt.threading.html":{"level":2,"children":["/api/stable/napari.qt.threading.FunctionWorker.html","/api/stable/napari.qt.threading.GeneratorWorker.html","/api/stable/napari.qt.threading.GeneratorWorkerSignals.html","/api/stable/napari.qt.threading.WorkerBase.html","/api/stable/napari.qt.threading.WorkerBaseSignals.html"],"href":"/api/stable/napari.qt.threading.html","text":"napari.qt.threading"},"/api/stable/napari.qt.threading.WorkerBaseSignals.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.WorkerBaseSignals.html","text":"napari.qt.threading.WorkerBaseSignals"},"/api/stable/napari.qt.threading.WorkerBase.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.WorkerBase.html","text":"napari.qt.threading.WorkerBase"},"/api/stable/napari.qt.threading.GeneratorWorkerSignals.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.GeneratorWorkerSignals.html","text":"napari.qt.threading.GeneratorWorkerSignals"},"/api/stable/napari.qt.threading.GeneratorWorker.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.GeneratorWorker.html","text":"napari.qt.threading.GeneratorWorker"},"/api/stable/napari.qt.threading.FunctionWorker.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.FunctionWorker.html","text":"napari.qt.threading.FunctionWorker"},"/api/stable/napari.components.html":{"level":2,"children":["/api/stable/napari.components.Camera.html","/api/stable/napari.components.Dims.html","/api/stable/napari.components.LayerList.html","/api/stable/napari.components.ViewerModel.html"],"href":"/api/stable/napari.components.html","text":"napari.components"},"/api/stable/napari.components.ViewerModel.html":{"level":3,"children":[],"href":"/api/stable/napari.components.ViewerModel.html","text":"napari.components.ViewerModel"},"/api/stable/napari.components.LayerList.html":{"level":3,"children":[],"href":"/api/stable/napari.components.LayerList.html","text":"napari.components.LayerList"},"/api/stable/napari.components.Dims.html":{"level":3,"children":[],"href":"/api/stable/napari.components.Dims.html","text":"napari.components.Dims"},"/api/stable/napari.components.Camera.html":{"level":3,"children":[],"href":"/api/stable/napari.components.Camera.html","text":"napari.components.Camera"},"/api/stable/napari.plugins.html":{"level":2,"children":["/api/stable/napari.plugins.NapariPluginManager.html"],"href":"/api/stable/napari.plugins.html","text":"napari.plugins"},"/api/stable/napari.plugins.NapariPluginManager.html":{"level":3,"children":[],"href":"/api/stable/napari.plugins.NapariPluginManager.html","text":"napari.plugins.NapariPluginManager"},"/api/stable/napari.utils.html":{"level":2,"children":["/api/stable/napari.utils.Colormap.html","/api/stable/napari.utils.nbscreenshot.html"],"href":"/api/stable/napari.utils.html","text":"napari.utils"},"/api/stable/napari.utils.nbscreenshot.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.nbscreenshot.html","text":"napari.utils.nbscreenshot"},"/api/stable/napari.utils.Colormap.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.Colormap.html","text":"napari.utils.Colormap"},"/api/stable/napari.types.html":{"level":2,"children":["/api/stable/napari.types.ArrayBase.html","/api/stable/napari.types.Path.html","/api/stable/napari.types.SampleDict.html","/api/stable/napari.types.TracebackType.html","/api/stable/napari.types.TypedDict.html"],"href":"/api/stable/napari.types.html","text":"napari.types"},"/api/stable/napari.types.TypedDict.html":{"level":3,"children":[],"href":"/api/stable/napari.types.TypedDict.html","text":"napari.types.TypedDict"},"/api/stable/napari.types.TracebackType.html":{"level":3,"children":[],"href":"/api/stable/napari.types.TracebackType.html","text":"napari.types.TracebackType"},"/api/stable/napari.types.SampleDict.html":{"level":3,"children":[],"href":"/api/stable/napari.types.SampleDict.html","text":"napari.types.SampleDict"},"/api/stable/napari.types.Path.html":{"level":3,"children":[],"href":"/api/stable/napari.types.Path.html","text":"napari.types.Path"},"/api/stable/napari.types.ArrayBase.html":{"level":3,"children":[],"href":"/api/stable/napari.types.ArrayBase.html","text":"napari.types.ArrayBase"},"/api/stable/napari.view_layers.html":{"level":2,"children":["/api/stable/napari.view_layers.Viewer.html"],"href":"/api/stable/napari.view_layers.html","text":"napari.view_layers"},"/api/stable/napari.view_layers.Viewer.html":{"level":3,"children":[],"href":"/api/stable/napari.view_layers.Viewer.html","text":"napari.view_layers.Viewer"},"/api/stable/napari.layers.html":{"level":2,"children":["/api/stable/napari.layers.Image.html","/api/stable/napari.layers.Labels.html","/api/stable/napari.layers.Layer.html","/api/stable/napari.layers.Points.html","/api/stable/napari.layers.Shapes.html","/api/stable/napari.layers.Surface.html","/api/stable/napari.layers.Tracks.html","/api/stable/napari.layers.Vectors.html"],"href":"/api/stable/napari.layers.html","text":"napari.layers"},"/api/stable/napari.layers.Vectors.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Vectors.html","text":"napari.layers.Vectors"},"/api/stable/napari.layers.Tracks.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Tracks.html","text":"napari.layers.Tracks"},"/api/stable/napari.layers.Surface.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Surface.html","text":"napari.layers.Surface"},"/api/stable/napari.layers.Shapes.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Shapes.html","text":"napari.layers.Shapes"},"/api/stable/napari.layers.Points.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Points.html","text":"napari.layers.Points"},"/api/stable/napari.layers.Layer.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Layer.html","text":"napari.layers.Layer"},"/api/stable/napari.layers.Labels.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Labels.html","text":"napari.layers.Labels"},"/api/stable/napari.layers.Image.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Image.html","text":"napari.layers.Image"},"/release/index.html":{"level":1,"children":["/release/release_0_4_10.html","/release/release_0_4_9.html","/release/release_0_4_8.html","/release/release_0_4_7.html","/release/release_0_4_6.html","/release/release_0_4_5.html","/release/release_0_4_4.html","/release/release_0_4_3.html","/release/release_0_4_2.html","/release/release_0_4_1.html","/release/release_0_4_0.html","/release/release_0_3_8.html","/release/release_0_3_7.html","/release/release_0_3_6.html","/release/release_0_3_5.html","/release/release_0_3_4.html","/release/release_0_3_3.html","/release/release_0_3_2.html","/release/release_0_3_1.html","/release/release_0_3_0.html","/release/release_0_2_12.html","/release/release_0_2_11.html","/release/release_0_2_10.html","/release/release_0_2_9.html","/release/release_0_2_8.html","/release/release_0_2_7.html","/release/release_0_2_6.html","/release/release_0_2_5.html","/release/release_0_2_4.html","/release/release_0_2_3.html","/release/release_0_2_1.html","/release/release_0_2_0.html","/release/release_0_1_5.html","/release/release_0_1_3.html","/release/release_0_1_0.html","/release/release_0_4_11.html"],"href":"/release/index.html","text":"Release notes"},"/release/release_0_4_11.html":{"level":2,"children":[],"href":"/release/release_0_4_11.html","text":"napari 0.4.11"},"/release/release_0_1_0.html":{"level":2,"children":[],"href":"/release/release_0_1_0.html","text":"napari 0.1.0"},"/release/release_0_1_3.html":{"level":2,"children":[],"href":"/release/release_0_1_3.html","text":"napari 0.1.3"},"/release/release_0_1_5.html":{"level":2,"children":[],"href":"/release/release_0_1_5.html","text":"napari 0.1.5"},"/release/release_0_2_0.html":{"level":2,"children":[],"href":"/release/release_0_2_0.html","text":"napari 0.2.0"},"/release/release_0_2_1.html":{"level":2,"children":[],"href":"/release/release_0_2_1.html","text":"napari 0.2.1"},"/release/release_0_2_3.html":{"level":2,"children":[],"href":"/release/release_0_2_3.html","text":"napari 0.2.3"},"/release/release_0_2_4.html":{"level":2,"children":[],"href":"/release/release_0_2_4.html","text":"napari 0.2.4"},"/release/release_0_2_5.html":{"level":2,"children":[],"href":"/release/release_0_2_5.html","text":"napari 0.2.5"},"/release/release_0_2_6.html":{"level":2,"children":[],"href":"/release/release_0_2_6.html","text":"napari 0.2.6"},"/release/release_0_2_7.html":{"level":2,"children":[],"href":"/release/release_0_2_7.html","text":"napari 0.2.7"},"/release/release_0_2_8.html":{"level":2,"children":[],"href":"/release/release_0_2_8.html","text":"napari 0.2.8"},"/release/release_0_2_9.html":{"level":2,"children":[],"href":"/release/release_0_2_9.html","text":"napari 0.2.9"},"/release/release_0_2_10.html":{"level":2,"children":[],"href":"/release/release_0_2_10.html","text":"napari 0.2.10"},"/release/release_0_2_11.html":{"level":2,"children":[],"href":"/release/release_0_2_11.html","text":"napari 0.2.11"},"/release/release_0_2_12.html":{"level":2,"children":[],"href":"/release/release_0_2_12.html","text":"napari 0.2.12"},"/release/release_0_3_0.html":{"level":2,"children":[],"href":"/release/release_0_3_0.html","text":"napari 0.3.0"},"/release/release_0_3_1.html":{"level":2,"children":[],"href":"/release/release_0_3_1.html","text":"napari 0.3.1"},"/release/release_0_3_2.html":{"level":2,"children":[],"href":"/release/release_0_3_2.html","text":"napari 0.3.2"},"/release/release_0_3_3.html":{"level":2,"children":[],"href":"/release/release_0_3_3.html","text":"napari 0.3.3"},"/release/release_0_3_4.html":{"level":2,"children":[],"href":"/release/release_0_3_4.html","text":"napari 0.3.4"},"/release/release_0_3_5.html":{"level":2,"children":[],"href":"/release/release_0_3_5.html","text":"napari 0.3.5"},"/release/release_0_3_6.html":{"level":2,"children":[],"href":"/release/release_0_3_6.html","text":"napari 0.3.6"},"/release/release_0_3_7.html":{"level":2,"children":[],"href":"/release/release_0_3_7.html","text":"napari 0.3.7"},"/release/release_0_3_8.html":{"level":2,"children":[],"href":"/release/release_0_3_8.html","text":"napari 0.3.8"},"/release/release_0_4_0.html":{"level":2,"children":[],"href":"/release/release_0_4_0.html","text":"napari 0.4.0"},"/release/release_0_4_1.html":{"level":2,"children":[],"href":"/release/release_0_4_1.html","text":"napari 0.4.1"},"/release/release_0_4_2.html":{"level":2,"children":[],"href":"/release/release_0_4_2.html","text":"napari 0.4.2"},"/release/release_0_4_3.html":{"level":2,"children":[],"href":"/release/release_0_4_3.html","text":"napari 0.4.3"},"/release/release_0_4_4.html":{"level":2,"children":[],"href":"/release/release_0_4_4.html","text":"napari 0.4.4"},"/release/release_0_4_5.html":{"level":2,"children":[],"href":"/release/release_0_4_5.html","text":"napari 0.4.5"},"/release/release_0_4_6.html":{"level":2,"children":[],"href":"/release/release_0_4_6.html","text":"napari 0.4.6"},"/release/release_0_4_7.html":{"level":2,"children":[],"href":"/release/release_0_4_7.html","text":"napari 0.4.7"},"/release/release_0_4_8.html":{"level":2,"children":[],"href":"/release/release_0_4_8.html","text":"napari 0.4.8"},"/release/release_0_4_9.html":{"level":2,"children":[],"href":"/release/release_0_4_9.html","text":"napari 0.4.9"},"/release/release_0_4_10.html":{"level":2,"children":[],"href":"/release/release_0_4_10.html","text":"napari 0.4.10"},"/plugins/stable/index.html":{"level":1,"children":["/plugins/stable/for_napari_developers.html","/plugins/stable/for_plugin_developers.html","/plugins/stable/hook_specifications.html","/plugins/stable/find-and-install-plugin.html"],"href":"/plugins/stable/index.html","text":"Plugins"},"/plugins/stable/find-and-install-plugin.html":{"level":2,"children":[],"href":"/plugins/stable/find-and-install-plugin.html","text":"Finding and installing a napari plugin"},"/plugins/stable/hook_specifications.html":{"level":2,"children":[],"href":"/plugins/stable/hook_specifications.html","text":"napari hook specification reference"},"/plugins/stable/for_plugin_developers.html":{"level":2,"children":[],"href":"/plugins/stable/for_plugin_developers.html","text":"creating a napari plugin"},"/plugins/stable/for_napari_developers.html":{"level":2,"children":[],"href":"/plugins/stable/for_napari_developers.html","text":"napari plugin architecture"},"/tutorials/index.html":{"level":1,"children":["/tutorials/fundamentals/index.html","/tutorials/applications/index.html"],"href":"/tutorials/index.html","text":"Tutorials"},"/tutorials/applications/index.html":{"level":2,"children":["/tutorials/applications/annotate_segmentation.html","/tutorials/applications/annotate_points.html","/tutorials/applications/dask.html","/tutorials/applications/napari_imageJ.html","/tutorials/applications/cell_tracking.html"],"href":"/tutorials/applications/index.html","text":"Applications"},"/tutorials/applications/cell_tracking.html":{"level":3,"children":[],"href":"/tutorials/applications/cell_tracking.html","text":"single cell tracking with napari"},"/tutorials/applications/napari_imageJ.html":{"level":3,"children":[],"href":"/tutorials/applications/napari_imageJ.html","text":"Napari + ImageJ How-to-Guide"},"/tutorials/applications/dask.html":{"level":3,"children":[],"href":"/tutorials/applications/dask.html","text":"using dask and napari to process & view large datasets"},"/tutorials/applications/annotate_points.html":{"level":3,"children":[],"href":"/tutorials/applications/annotate_points.html","text":"annotating videos with napari"},"/tutorials/applications/annotate_segmentation.html":{"level":3,"children":[],"href":"/tutorials/applications/annotate_segmentation.html","text":"annotating segmentation with text and bounding boxes"},"/tutorials/fundamentals/index.html":{"level":2,"children":["/tutorials/fundamentals/installation.html","/tutorials/fundamentals/getting_started.html","/tutorials/fundamentals/viewer.html","/tutorials/fundamentals/image.html","/tutorials/fundamentals/labels.html","/tutorials/fundamentals/points.html","/tutorials/fundamentals/shapes.html","/tutorials/fundamentals/surface.html","/tutorials/fundamentals/tracks.html","/tutorials/fundamentals/vectors.html"],"href":"/tutorials/fundamentals/index.html","text":"Fundamentals"},"/tutorials/fundamentals/vectors.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/vectors.html","text":"vectors layer tutorial"},"/tutorials/fundamentals/tracks.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/tracks.html","text":"tracks layer tutorial"},"/tutorials/fundamentals/surface.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/surface.html","text":"surface layer tutorial"},"/tutorials/fundamentals/shapes.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/shapes.html","text":"shapes layer tutorial"},"/tutorials/fundamentals/points.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/points.html","text":"points layer tutorial"},"/tutorials/fundamentals/labels.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/labels.html","text":"labels layer tutorial"},"/tutorials/fundamentals/image.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/image.html","text":"image layer tutorial"},"/tutorials/fundamentals/viewer.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/viewer.html","text":"napari viewer tutorial"},"/tutorials/fundamentals/getting_started.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/getting_started.html","text":"getting started with napari"},"/tutorials/fundamentals/installation.html":{"level":3,"children":[],"href":"/tutorials/fundamentals/installation.html","text":"napari installation tutorial"},"/community/index.html":{"level":1,"children":["/community/mission_and_values.html","/community/team.html","/community/code_of_conduct.html","/community/code_of_conduct_reporting.html","/community/governance.html"],"href":"/community/index.html","text":"Community"},"/community/governance.html":{"level":2,"children":[],"href":"/community/governance.html","text":"Governance Model"},"/community/code_of_conduct_reporting.html":{"level":2,"children":[],"href":"/community/code_of_conduct_reporting.html","text":"Handling Code of Conduct Reports"},"/community/code_of_conduct.html":{"level":2,"children":[],"href":"/community/code_of_conduct.html","text":"Code of Conduct"},"/community/team.html":{"level":2,"children":[],"href":"/community/team.html","text":"About the Project and Team"},"/community/mission_and_values.html":{"level":2,"children":[],"href":"/community/mission_and_values.html","text":"Mission and Values"}},"rootGlobalHeaders":["/community/index.html","/tutorials/index.html","/plugins/stable/index.html","/release/index.html","/api/stable/index.html","/roadmaps/index.html","/guides/stable/index.html","/developers/index.html","https://github.com/napari/napari","https://napari-hub.org"],"pageTitle":"Performance Monitoring","pageFrontMatter":{},"appScripts":[{"src":"/_static/documentation_options.js"},{"src":"/_static/jquery.js"},{"src":"/_static/underscore.js"},{"src":"/_static/doctools.js"},{"src":"/_static/togglebutton.js"},{"src":"/_static/clipboard.min.js"},{"src":"/_static/copybutton.js"},{"children":"var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';"},{"src":"https://unpkg.com/thebe@0.5.1/lib/index.js"},{"children":"\n        const thebe_selector = \".thebe\"\n        const thebe_selector_input = \"pre\"\n        const thebe_selector_output = \".output\"\n    "},{"src":"/_static/sphinx-thebe.js"}],"appStyleSheets":[{"href":"/_static/pygments.css","rel":"stylesheet"},{"href":"/_static/togglebutton.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/copybutton.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/mystnb.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/sphinx-thebe.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/panels-variables.06eb56fa6e07937060861dad626602ad.css","rel":"stylesheet","type":"text/css"}],"pageBodyHtml":"\n        <div id=\"documentation_options\" data-url_root=\"../../\"></div>\n        <div class=\"section\" id=\"performance-monitoring\">\n<span id=\"perfmon\"></span>\n<p>If napari is not performing well, you can use\n<a class=\"reference internal\" href=\"../../api/stable/napari.utils.perf.html#module-napari.utils.perf\" title=\"napari.utils.perf\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">napari.utils.perf</span></code></a> to help\ndiagnose the problem.</p>\n<p>The module can do several things:</p>\n<ol class=\"simple\">\n<li><p>Time Qt Events</p></li>\n<li><p>Display a dockable <strong>performance</strong> widget.</p></li>\n<li><p>Write JSON trace files viewable with <code class=\"docutils literal notranslate\"><span class=\"pre\">chrome://tracing</span></code>.</p></li>\n<li><p>Time any function that you specify in the config file.</p></li>\n</ol>\n<div class=\"section\" id=\"monitoring-vs-profiling\">\n<h2>Monitoring vs. Profiling</h2>\n<p>Profiling is similar to performance monitoring. However profiling usually\ninvolves running an external tool to acquire timing data on every function\nin the program. Sometimes this will cause the program to run so slowly it’s\nhard to use the program interactively.</p>\n<p>Performance monitoring does not require running a separate tool to collect\nthe timing information, however we do use Chrome to view the trace files.\nWith performance monitoring napari can run at close to full speed in many\ncases. This document discusses only napari’s performance monitoring\nfeatures. Profiling napari might be useful as well, but it is not discussed\nhere.</p>\n</div>\n<div class=\"section\" id=\"enabling-perfmon\">\n<h2>Enabling perfmon</h2>\n<p>There are two ways to enable performance monitoring. Set the environment\nvariable <code class=\"docutils literal notranslate\"><span class=\"pre\">NAPARI_PERFMON=1</span></code> or set <code class=\"docutils literal notranslate\"><span class=\"pre\">NAPARI_PERFMON</span></code> to the path of\na JSON configuration file, for example <code class=\"docutils literal notranslate\"><span class=\"pre\">NAPARI_PERFMON=/tmp/perfmon.json</span></code>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Note: when using <code class=\"docutils literal notranslate\"><span class=\"pre\">NAPARI_PERFMON</span></code>, napari must create the Qt Application.\nIf you are using <code class=\"docutils literal notranslate\"><span class=\"pre\">NAPARI_PERFMON=1</span> <span class=\"pre\">ipython</span></code>, do not use <code class=\"docutils literal notranslate\"><span class=\"pre\">%gui</span> <span class=\"pre\">qt</span></code> before\ncreating a napari <code class=\"docutils literal notranslate\"><span class=\"pre\">Viewer</span></code>.</p>\n</div>\n<p>Setting <code class=\"docutils literal notranslate\"><span class=\"pre\">NAPARI_PERFMON=1</span></code> does three things:</p>\n<ol class=\"simple\">\n<li><p>Times Qt Events</p></li>\n<li><p>Shows the dockable <strong>performance</strong> widget.</p></li>\n<li><p>Reveals the <strong>Debug</strong> menu which you can use to create a trace file.</p></li>\n</ol>\n</div>\n<div class=\"section\" id=\"configuration-file-format\">\n<h2>Configuration File Format</h2>\n<p>Example configuration file:</p>\n<div class=\"highlight-json notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span>\n    <span class=\"nt\">\"trace_qt_events\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"trace_file_on_start\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/tmp/latest.json\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"trace_callables\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"chunk_loader\"</span>\n    <span class=\"p\">],</span>\n    <span class=\"nt\">\"callable_lists\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"chunk_loader\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"napari.components.chunk._loader.ChunkLoader.load_chunk\"</span><span class=\"p\">,</span>\n            <span class=\"s2\">\"napari.components.chunk._loader.ChunkLoader._done\"</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"configuration-options\">\n<h2>Configuration Options</h2>\n<div class=\"section\" id=\"trace-qt-events\">\n<h3><code class=\"docutils literal notranslate\"><span class=\"pre\">trace_qt_events</span></code></h3>\n<p>If true perfmon will time the duration of all Qt Events. You might\nwant to turn this off if the overhead is noticeable, or if you want\nyour trace file to be less cluttered.</p>\n</div>\n<div class=\"section\" id=\"trace-file-on-start\">\n<h3><code class=\"docutils literal notranslate\"><span class=\"pre\">trace_file_on_start</span></code></h3>\n<p>If a path is given, napari will start tracing immediately on start. In many\ncases this is much more convenient than using the <strong>Debug</strong> Menu. Be sure to\nexit napari using the <strong>Quit</strong> command. The trace file will be written on\nexit.</p>\n</div>\n<div class=\"section\" id=\"trace-callables\">\n<h3><code class=\"docutils literal notranslate\"><span class=\"pre\">trace_callables</span></code></h3>\n<p>Specify which <code class=\"docutils literal notranslate\"><span class=\"pre\">callable_lists</span></code> you want to trace. You can have many\n<code class=\"docutils literal notranslate\"><span class=\"pre\">callable_lists</span></code> defined, but this setting says which should be traced.</p>\n</div>\n<div class=\"section\" id=\"callable-lists\">\n<h3><code class=\"docutils literal notranslate\"><span class=\"pre\">callable_lists</span></code></h3>\n<p>These lists can be referenced by the <code class=\"docutils literal notranslate\"><span class=\"pre\">callable_lists</span></code> option. You might\nwant multiple lists so they can be enabled separately.</p>\n</div>\n</div>\n<div class=\"section\" id=\"trace-file\">\n<h2>Trace File</h2>\n<p>The trace file that napari produces is viewable in Chrome. Go to the\nspecial URL <code class=\"docutils literal notranslate\"><span class=\"pre\">chrome://tracing</span></code>. Use the <strong>Load</strong> button inside the Chrome\nwindow, or just drag-n-drop your JSON trace file into the Chrome window.\nYou can also view trace files using the\n<a class=\"reference external\" href=\"https://www.speedscope.app/\">Speedscope website</a>.\nIt is similar to <code class=\"docutils literal notranslate\"><span class=\"pre\">chrome://tracing</span></code> but has some different features.</p>\n<p>The trace file format is specified in the\n<a class=\"reference external\" href=\"https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/preview\">Trace File Format</a>\nGoogle Doc. The format is well-documented, but there are no pictures so\nit’s not always clear how a given feature actually looks in the Chrome\nTracing GUI.</p>\n</div>\n<div class=\"section\" id=\"example-investigation\">\n<h2>Example Investigation</h2>\n<p>This is an example showing how you might use the\n<a class=\"reference internal\" href=\"../../api/stable/napari.utils.perf.html#module-napari.utils.perf\" title=\"napari.utils.perf\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">napari.utils.perf</span></code></a> module.</p>\n<div class=\"section\" id=\"add-a-sleep\">\n<h3>Add a Sleep</h3>\n<p>To simulate a performance problem in napari, add a <code class=\"docutils literal notranslate\"><span class=\"pre\">sleep()</span></code> call to the\n<code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">Labels.paint</span></code> method, this\nwill make the method take at least 100 ms:</p>\n</div>\n<div class=\"section\" id=\"create-a-perfmon-config-file\">\n<h3>Create a Perfmon Config File</h3>\n<p>Create a minimal perfmon config file <code class=\"docutils literal notranslate\"><span class=\"pre\">/tmp/perfmon.json</span></code> that looks like this:</p>\n<div class=\"highlight-json notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span>\n    <span class=\"nt\">\"trace_qt_events\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"trace_file_on_start\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/tmp/latest.json\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"trace_callables\"</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p>This will write <code class=\"docutils literal notranslate\"><span class=\"pre\">/tmp/latest.json</span></code> every time we run napari. This file is\nonly written on exit, and you must exit with the <strong>Quit</strong> commmand. Using\n<code class=\"docutils literal notranslate\"><span class=\"pre\">trace_file_on_start</span></code> is often easier than manually starting a trace using\nthe <strong>Debug</strong> menu.</p>\n</div>\n<div class=\"section\" id=\"run-napari\">\n<h3>Run napari</h3>\n<p>Now run napari’s <code class=\"docutils literal notranslate\"><span class=\"pre\">add_labels</span></code> example like this:</p>\n<div class=\"highlight-shell notranslate\"><div class=\"highlight\"><pre><span></span>    <span class=\"nv\">NAPARI_PERFMON</span><span class=\"o\">=</span>/tmp/perfmon.json python examples/add_labels.py\n</pre></div>\n</div>\n<p>Use the paint tool and single-click once or twice on the labels layer. Look\nat the <strong>performance</strong> widget, it should show that some events took over\n100ms. The <strong>performance</strong> widget is just to give you a quick idea of what\nis running slow:</p>\n<p><img alt=\"example widget output\" src=\"https://user-images.githubusercontent.com/4163446/94198620-898c4c00-fe85-11ea-8769-83f52c0a1aad.png\"></p>\n<p>The trace file will give you much more information than the <strong>performance</strong>\nwidget. Exit napari using the <strong>Quit</strong> command so that it writes the trace\nfile on exit.</p>\n</div>\n<div class=\"section\" id=\"view-trace-in-chrome\">\n<h3>View Trace in Chrome</h3>\n<p>Run Chrome and go to the URL <code class=\"docutils literal notranslate\"><span class=\"pre\">chrome://tracing</span></code>. Drag and drop\n<code class=\"docutils literal notranslate\"><span class=\"pre\">/tmp/latest.json</span></code> into the Chrome window, or use the <strong>Load</strong> button to\nload the JSON file. You will usually need to pan and zoom the trace to\nexplore it, to figure out what is going on.</p>\n<p>You can navigate with the mouse, but using the keyboard might be easier.\nPress the <code class=\"docutils literal notranslate\"><span class=\"pre\">AD</span></code> keys to move left and right, and press the <code class=\"docutils literal notranslate\"><span class=\"pre\">WS</span></code> keys to zoom\nin or out. Both the <code class=\"docutils literal notranslate\"><span class=\"pre\">MouseButtonPress</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">MouseMove</span></code> events are slow. In\nthe lower pane the <code class=\"docutils literal notranslate\"><span class=\"pre\">Wall</span> <span class=\"pre\">Duration</span></code> field says it took over 100ms:</p>\n<p><img alt=\"example chrome output\" src=\"https://user-images.githubusercontent.com/4163446/94200256-1fc17180-fe88-11ea-9935-bef4f818407d.png\"></p>\n<p>So we can see that some events are running slow. The next questions is\nwhy are <code class=\"docutils literal notranslate\"><span class=\"pre\">MouseButtonPress</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">MouseMove</span></code> running slow? To answer this\nquestion we can add more timers. In this case we know the answer, but often\nyou will have to guess or experiment. You might add some timers and then\nfind out they actually run fast, so you can remove them.</p>\n</div>\n<div class=\"section\" id=\"add-paint-method\">\n<h3>Add Paint Method</h3>\n<p>To add the <a class=\"reference internal\" href=\"../../api/stable/napari.layers.Labels.html#napari.layers.Labels.paint\" title=\"napari.layers.Labels.paint\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">Labels.paint</span></code></a> method to\nthe trace, create a new list of callables named <code class=\"docutils literal notranslate\"><span class=\"pre\">labels</span></code> and put the\n<a class=\"reference internal\" href=\"../../api/stable/napari.layers.Labels.html#napari.layers.Labels.paint\" title=\"napari.layers.Labels.paint\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">Labels.paint</span></code></a> method into\nthat list.</p>\n<div class=\"highlight-json notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span>\n    <span class=\"nt\">\"trace_qt_events\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"trace_file_on_start\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/tmp/latest.json\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"trace_callables\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"labels\"</span>\n    <span class=\"p\">],</span>\n    <span class=\"nt\">\"callable_lists\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"labels\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"napari.layers.labels.Labels.paint\"</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"create-the-new-trace-file\">\n<h3>Create the new Trace File</h3>\n<p>Run <code class=\"docutils literal notranslate\"><span class=\"pre\">add_labels</span></code> as before, click with the paint tool, exit with the <strong>Quit</strong>\ncommand.</p>\n</div>\n<div class=\"section\" id=\"view-the-new-trace-file\">\n<h3>View the new Trace File</h3>\n<p>Drop <code class=\"docutils literal notranslate\"><span class=\"pre\">/tmp/latest.json</span></code> into Chrome again. Now we can see that\n<code class=\"docutils literal notranslate\"><span class=\"pre\">MouseButtonPress</span></code> calls\n<a class=\"reference internal\" href=\"../../api/stable/napari.layers.Labels.html#napari.layers.Labels.paint\" title=\"napari.layers.Labels.paint\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">Labels.paint</span></code></a> and that\n<a class=\"reference internal\" href=\"../../api/stable/napari.layers.Labels.html#napari.layers.Labels.paint\" title=\"napari.layers.Labels.paint\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">Labels.paint</span></code></a> is really responsible\nfor most of the time. After clicking on the event press the <code class=\"docutils literal notranslate\"><span class=\"pre\">m</span></code> key, that\nwill highlight the event duration with arrows and print the duration right\non the timeline, in this case it says the event took 106.597ms:</p>\n<p><img alt=\"highlighted event duration showing Labels.paint took 106.597ms to run\" src=\"https://user-images.githubusercontent.com/4163446/94201049-66fc3200-fe89-11ea-9720-6a7ff3c7361a.png\"></p>\n<p>When investigating a real problem we might have to add many functions to\nthe config file. It’s best to add timers that take a lot of time. If you\nadd a timer that’s called thousands of times, it will add overhead and will\nclutter the trace file. In general we want to trace important and\ninteresting functions. If we create a large <code class=\"docutils literal notranslate\"><span class=\"pre\">callable_list</span></code> we can save it\nfor future use.</p>\n</div>\n<div class=\"section\" id=\"advanced\">\n<h3>Advanced</h3>\n<p>Experiment with the <a class=\"reference internal\" href=\"../../api/stable/napari.utils.perf.html#module-napari.utils.perf\" title=\"napari.utils.perf\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">napari.utils.perf</span></code></a> features and\nyou will find your own tricks and techniques.</p>\n<p>Create multiple <code class=\"docutils literal notranslate\"><span class=\"pre\">callable_lists</span></code> and toggle them on or off depending on\nwhat you are investigating. The perfmon overhead is low, but tracing only\nwhat you care about will yield the best performance and lead to trace files\nthat are easier to understand.</p>\n<p>Use the <a class=\"reference internal\" href=\"../../api/stable/napari.utils.perf.html#napari.utils.perf.perf_timer\" title=\"napari.utils.perf.perf_timer\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">perf_timer</span></code></a> context object to\ntime only a block of code, or even a single line, if you don’t want to time\nan entire function.</p>\n<p>Use <a class=\"reference internal\" href=\"../../api/stable/napari.utils.perf.html#napari.utils.perf.add_instant_event\" title=\"napari.utils.perf.add_instant_event\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">add_instant_event</span></code></a> and\n<a class=\"reference internal\" href=\"../../api/stable/napari.utils.perf.html#napari.utils.perf.add_counter_event\" title=\"napari.utils.perf.add_counter_event\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">add_counter_event</span></code></a> to annotate\nyour trace file with additional information beyond just timing events. The\n<code class=\"docutils literal notranslate\"><span class=\"pre\">add_instant_event</span></code> function draws a vertical line on the trace in Chrome,\nto show when something happened like a click. The <code class=\"docutils literal notranslate\"><span class=\"pre\">add_counter_event</span></code>\nfunction creates a bar graph on the trace showing the value of some counter\nat every point in time. For example you could record the length of a queue,\nand see the queue grow and shrink over time.</p>\n<p>Calls to <code class=\"docutils literal notranslate\"><span class=\"pre\">perf_timer</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">add_instant_event</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">add_counter_event</span></code> should\nbe removed before merging code into main. Think of them like “debug\nprints”, things you add while investigating a problem, but you do not leave\nthem in the code permanently.</p>\n<p>You can save JSON files so that you can compare how things looked\nbefore and after your changes.</p>\n</div>\n</div>\n</div>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            kernelName: \"python3\",\n            path: \"./guides/stable\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>\n      ","pageHeaders":[{"href":"#monitoring-vs-profiling","text":"Monitoring vs. Profiling"},{"href":"#enabling-perfmon","text":"Enabling perfmon"},{"href":"#configuration-file-format","text":"Configuration File Format"},{"href":"#configuration-options","text":"Configuration Options"},{"href":"#trace-file","text":"Trace File"},{"href":"#example-investigation","text":"Example Investigation"}]}},"__N_SSG":true}